use std::collections::HashMap;
use crate::ThemeConfig;

pub fn preset_theme(name: &str) -> ThemeConfig {
    match name {
        "dracula" => dracula(),
        "one_dark" => one_dark(),
        "nord" => nord(),
        "tokyo_night" => tokyo_night(),
        "light" => light(),
        "solarized_light" => solarized_light(),
        _ => one_dark(),
    }
}

fn base(font_family: &str, font_size: f32, padding: f32, line_height: f32) -> ThemeConfig {
    ThemeConfig {
        font_family: font_family.to_string(),
        font_size,
        enable_ligatures: false,
        padding,
        line_height,
        colors: HashMap::new(),
    }
}

fn apply(mut theme: ThemeConfig, colors: &[(&str, [f32; 3])]) -> ThemeConfig {
    for (key, value) in colors {
        theme.colors.insert((*key).to_string(), *value);
    }
    theme
}

fn one_dark() -> ThemeConfig {
    apply(
        base("Monospace", 16.0, 15.0, 1.2),
        &[
            ("foreground", [0.76, 0.78, 0.82]),
            ("background", [0.11, 0.12, 0.13]),
            ("cursor", [0.32, 0.66, 0.99]),
            ("selection", [0.24, 0.27, 0.33]),
            ("ui_border", [0.18, 0.20, 0.24]),
            ("ui_input_bg", [0.22, 0.24, 0.28]),
            ("ui_input_border", [0.32, 0.66, 0.99]),
            ("ui_panel_bg", [0.12, 0.13, 0.16]),
            ("ansi_0", [0.11, 0.12, 0.13]),
            ("ansi_1", [0.88, 0.35, 0.35]),
            ("ansi_2", [0.55, 0.78, 0.34]),
            ("ansi_3", [0.82, 0.60, 0.27]),
            ("ansi_4", [0.38, 0.63, 0.93]),
            ("ansi_5", [0.78, 0.46, 0.96]),
            ("ansi_6", [0.27, 0.78, 0.88]),
            ("ansi_7", [0.76, 0.78, 0.82]),
            ("ansi_8", [0.39, 0.42, 0.49]),
            ("ansi_9", [0.88, 0.35, 0.35]),
            ("ansi_10", [0.55, 0.78, 0.34]),
            ("ansi_11", [0.82, 0.60, 0.27]),
            ("ansi_12", [0.38, 0.63, 0.93]),
            ("ansi_13", [0.78, 0.46, 0.96]),
            ("ansi_14", [0.27, 0.78, 0.88]),
            ("ansi_15", [0.93, 0.94, 0.96]),
            ("syntax_keyword", [0.78, 0.46, 0.96]),
            ("syntax_string", [0.55, 0.78, 0.34]),
            ("syntax_number", [0.82, 0.60, 0.27]),
            ("syntax_comment", [0.39, 0.42, 0.49]),
        ],
    )
}

fn dracula() -> ThemeConfig {
    apply(
        base("Monospace", 16.0, 15.0, 1.2),
        &[
            ("foreground", [0.97, 0.97, 0.98]),
            ("background", [0.16, 0.17, 0.21]),
            ("cursor", [0.98, 0.41, 0.70]),
            ("selection", [0.27, 0.28, 0.35]),
            ("ui_border", [0.25, 0.27, 0.33]),
            ("ui_input_bg", [0.22, 0.23, 0.29]),
            ("ui_input_border", [0.98, 0.41, 0.70]),
            ("ui_panel_bg", [0.18, 0.19, 0.24]),
            ("ansi_0", [0.16, 0.17, 0.21]),
            ("ansi_1", [1.0, 0.33, 0.33]),
            ("ansi_2", [0.31, 0.89, 0.55]),
            ("ansi_3", [0.95, 0.80, 0.40]),
            ("ansi_4", [0.74, 0.58, 0.98]),
            ("ansi_5", [1.0, 0.47, 0.78]),
            ("ansi_6", [0.54, 0.91, 0.99]),
            ("ansi_7", [0.97, 0.97, 0.98]),
            ("ansi_8", [0.39, 0.41, 0.49]),
            ("ansi_9", [1.0, 0.33, 0.33]),
            ("ansi_10", [0.31, 0.89, 0.55]),
            ("ansi_11", [0.95, 0.80, 0.40]),
            ("ansi_12", [0.74, 0.58, 0.98]),
            ("ansi_13", [1.0, 0.47, 0.78]),
            ("ansi_14", [0.54, 0.91, 0.99]),
            ("ansi_15", [0.97, 0.97, 0.98]),
            ("syntax_keyword", [0.74, 0.58, 0.98]),
            ("syntax_string", [0.31, 0.89, 0.55]),
            ("syntax_number", [0.95, 0.80, 0.40]),
            ("syntax_comment", [0.39, 0.41, 0.49]),
        ],
    )
}

fn nord() -> ThemeConfig {
    apply(
        base("Monospace", 16.0, 15.0, 1.2),
        &[
            ("foreground", [0.85, 0.87, 0.91]),
            ("background", [0.18, 0.20, 0.25]),
            ("cursor", [0.54, 0.76, 0.94]),
            ("selection", [0.26, 0.30, 0.37]),
            ("ui_border", [0.23, 0.26, 0.31]),
            ("ui_input_bg", [0.22, 0.25, 0.31]),
            ("ui_input_border", [0.54, 0.76, 0.94]),
            ("ui_panel_bg", [0.19, 0.21, 0.27]),
            ("ansi_0", [0.18, 0.20, 0.25]),
            ("ansi_1", [0.75, 0.38, 0.42]),
            ("ansi_2", [0.64, 0.77, 0.55]),
            ("ansi_3", [0.91, 0.78, 0.52]),
            ("ansi_4", [0.54, 0.76, 0.94]),
            ("ansi_5", [0.71, 0.55, 0.89]),
            ("ansi_6", [0.53, 0.78, 0.84]),
            ("ansi_7", [0.85, 0.87, 0.91]),
            ("ansi_8", [0.43, 0.48, 0.57]),
            ("ansi_9", [0.75, 0.38, 0.42]),
            ("ansi_10", [0.64, 0.77, 0.55]),
            ("ansi_11", [0.91, 0.78, 0.52]),
            ("ansi_12", [0.54, 0.76, 0.94]),
            ("ansi_13", [0.71, 0.55, 0.89]),
            ("ansi_14", [0.53, 0.78, 0.84]),
            ("ansi_15", [0.93, 0.94, 0.96]),
            ("syntax_keyword", [0.71, 0.55, 0.89]),
            ("syntax_string", [0.64, 0.77, 0.55]),
            ("syntax_number", [0.91, 0.78, 0.52]),
            ("syntax_comment", [0.43, 0.48, 0.57]),
        ],
    )
}

fn tokyo_night() -> ThemeConfig {
    apply(
        base("Monospace", 16.0, 15.0, 1.2),
        &[
            ("foreground", [0.78, 0.80, 0.94]),
            ("background", [0.10, 0.10, 0.16]),
            ("cursor", [0.48, 0.72, 0.98]),
            ("selection", [0.20, 0.22, 0.30]),
            ("ui_border", [0.18, 0.20, 0.28]),
            ("ui_input_bg", [0.16, 0.18, 0.26]),
            ("ui_input_border", [0.48, 0.72, 0.98]),
            ("ui_panel_bg", [0.12, 0.13, 0.20]),
            ("ansi_0", [0.10, 0.10, 0.16]),
            ("ansi_1", [0.95, 0.33, 0.41]),
            ("ansi_2", [0.62, 0.86, 0.61]),
            ("ansi_3", [0.95, 0.78, 0.47]),
            ("ansi_4", [0.48, 0.72, 0.98]),
            ("ansi_5", [0.73, 0.59, 0.98]),
            ("ansi_6", [0.38, 0.84, 0.98]),
            ("ansi_7", [0.78, 0.80, 0.94]),
            ("ansi_8", [0.36, 0.39, 0.52]),
            ("ansi_9", [0.95, 0.33, 0.41]),
            ("ansi_10", [0.62, 0.86, 0.61]),
            ("ansi_11", [0.95, 0.78, 0.47]),
            ("ansi_12", [0.48, 0.72, 0.98]),
            ("ansi_13", [0.73, 0.59, 0.98]),
            ("ansi_14", [0.38, 0.84, 0.98]),
            ("ansi_15", [0.88, 0.89, 0.97]),
            ("syntax_keyword", [0.73, 0.59, 0.98]),
            ("syntax_string", [0.62, 0.86, 0.61]),
            ("syntax_number", [0.95, 0.78, 0.47]),
            ("syntax_comment", [0.36, 0.39, 0.52]),
        ],
    )
}

fn light() -> ThemeConfig {
    apply(
        base("Monospace", 16.0, 15.0, 1.2),
        &[
            ("foreground", [0.10, 0.12, 0.15]),
            ("background", [0.97, 0.97, 0.98]),
            ("cursor", [0.26, 0.51, 0.89]),
            ("selection", [0.82, 0.86, 0.92]),
            ("ui_border", [0.80, 0.82, 0.86]),
            ("ui_input_bg", [0.93, 0.93, 0.95]),
            ("ui_input_border", [0.26, 0.51, 0.89]),
            ("ui_panel_bg", [0.94, 0.95, 0.97]),
            ("ansi_0", [0.10, 0.12, 0.15]),
            ("ansi_1", [0.78, 0.20, 0.24]),
            ("ansi_2", [0.22, 0.62, 0.35]),
            ("ansi_3", [0.76, 0.55, 0.16]),
            ("ansi_4", [0.20, 0.47, 0.80]),
            ("ansi_5", [0.62, 0.34, 0.78]),
            ("ansi_6", [0.18, 0.62, 0.68]),
            ("ansi_7", [0.85, 0.86, 0.90]),
            ("ansi_8", [0.45, 0.47, 0.50]),
            ("ansi_9", [0.78, 0.20, 0.24]),
            ("ansi_10", [0.22, 0.62, 0.35]),
            ("ansi_11", [0.76, 0.55, 0.16]),
            ("ansi_12", [0.20, 0.47, 0.80]),
            ("ansi_13", [0.62, 0.34, 0.78]),
            ("ansi_14", [0.18, 0.62, 0.68]),
            ("ansi_15", [0.96, 0.96, 0.98]),
            ("syntax_keyword", [0.62, 0.34, 0.78]),
            ("syntax_string", [0.22, 0.62, 0.35]),
            ("syntax_number", [0.76, 0.55, 0.16]),
            ("syntax_comment", [0.45, 0.47, 0.50]),
        ],
    )
}

fn solarized_light() -> ThemeConfig {
    apply(
        base("Monospace", 16.0, 15.0, 1.2),
        &[
            ("foreground", [0.40, 0.46, 0.48]),
            ("background", [0.99, 0.96, 0.89]),
            ("cursor", [0.16, 0.50, 0.72]),
            ("selection", [0.86, 0.80, 0.70]),
            ("ui_border", [0.82, 0.75, 0.64]),
            ("ui_input_bg", [0.97, 0.94, 0.88]),
            ("ui_input_border", [0.16, 0.50, 0.72]),
            ("ui_panel_bg", [0.98, 0.95, 0.90]),
            ("ansi_0", [0.00, 0.17, 0.21]),
            ("ansi_1", [0.86, 0.20, 0.18]),
            ("ansi_2", [0.52, 0.60, 0.00]),
            ("ansi_3", [0.71, 0.54, 0.00]),
            ("ansi_4", [0.14, 0.43, 0.58]),
            ("ansi_5", [0.83, 0.21, 0.51]),
            ("ansi_6", [0.16, 0.63, 0.60]),
            ("ansi_7", [0.93, 0.91, 0.84]),
            ("ansi_8", [0.35, 0.43, 0.46]),
            ("ansi_9", [0.86, 0.20, 0.18]),
            ("ansi_10", [0.52, 0.60, 0.00]),
            ("ansi_11", [0.71, 0.54, 0.00]),
            ("ansi_12", [0.14, 0.43, 0.58]),
            ("ansi_13", [0.83, 0.21, 0.51]),
            ("ansi_14", [0.16, 0.63, 0.60]),
            ("ansi_15", [0.99, 0.96, 0.89]),
            ("syntax_keyword", [0.83, 0.21, 0.51]),
            ("syntax_string", [0.52, 0.60, 0.00]),
            ("syntax_number", [0.71, 0.54, 0.00]),
            ("syntax_comment", [0.35, 0.43, 0.46]),
        ],
    )
}
